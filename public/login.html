<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="styles/logins.css">
        <title>Task Manager</title>
        <style>
            /* Style for the alert error message */
            #alert_error {
                display: none; /* Initially hidden */
                color: white;
                font-size: 16px;
                padding: 10px;
                border: 2px solid #f5c6cb;
                border-radius: 5px;
            
            }
        </style>
    </head>
<body>
    <div id="header">
        <div style="background-color: #0093E9; height: 400px;
        background-image: linear-gradient(160deg, #133950 0%, #309084 100%);" class="rect_2"></div>
    </div>

    <div class="contain">                  
        <nav>
            <ul>
                <li><a style="position: absolute;font-size: 16px; font-weight: lighter;" href="/signup">Sign Up</a></li>
            </ul>  
        </nav>
    </div>       
    <form id="login-form" action="/" method="POST">     
        <div class="loginform">              
            <div class="container">
                <!-- Error message container -->
                <div id="alert_error"></div>
    <h3 style="color: white;justify-content: center;font-size: 20px;font-weight: lighter;">Task Manager</h3>
                <div class="inputs">
                    <label for="email">
                        <input style="margin-top: 20px;" type="email" id="username" required maxlength="64" name="email"
                        placeholder="Username" onfocus="if(this.value == 'username'){this.value = '';}" 
                        onblur="if(this.value == ''){this.value = 'username';}">
                    </label>
                </div>
                <div>
                    <label for="password">
                        <input type="password" id="pass" minlength="4" required placeholder="Password" maxlength="20" name="password"
                        onfocus="this.value = this.value=='Password'?'':this.value;" 
                        onblur="this.value = this.value==''?'Password':this.value;">
                    </label>
                </div>
            </div>

            <div class="login_button">
                <input style="margin-top: 30px; padding: 10px 0px; background-color: orangered; color: white; font-weight: 300;" type="submit" value="Login">
            </div>
        </div>
    </form>

    <script>
        // Get the URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const errorType = urlParams.get('error');
        
        // Check if there's an error query parameter
        if (errorType) {
            const alertError = document.getElementById('alert_error');
            alertError.style.display = 'block'; // Show the error message

            // Set the appropriate error message based on the error type
            if (errorType === 'incorrect') {
                alertError.innerText = 'Incorrect email or password.';
            } else if (errorType === 'usernotfound') {
                alertError.innerText = 'No user found with this email address.';
            } else if (errorType === 'missingcredentials') {
                alertError.innerText = 'Please provide both email and password.';
            } else {
                alertError.innerText = 'An unknown error occurred. Please try again.';
            }
        }
    </script>
</body>
</html>
